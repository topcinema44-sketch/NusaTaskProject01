    Cooldown 2 menit, limit 20x per tombol, reset jam 03:00 WIB</p>
  </div>

  <!-- üîî Toast -->
  <div id="toast" class="toast"></div>

  <script>
    // ‚úÖ Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyCrFmaHbmL299cum51EtJIjt5NpukpTmho",
      authDomain: "penyimpanansaldo-280df.firebaseapp.com",
      databaseURL: "https://penyimpanansaldo-280df-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "penyimpanansaldo-280df",
      storageBucket: "penyimpanansaldo-280df.firebasestorage.app",
      messagingSenderId: "659609775130",
      appId: "1:659609775130:web:bdd088ca5a877498c5b5a3",
      measurementId: "G-L4TW7E23H2"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();

    let userId = null;

    // üîî Fungsi Toast
    function showToast(message) {
      const toast = document.getElementById("toast");
      toast.innerText = message;
      toast.classList.add("show");
      setTimeout(() => toast.classList.remove("show"), 2500);
    }

    // ‚úÖ Auto Login / Register Guest
    auth.signInAnonymously().then(userCred => {
      userId = userCred.user.uid;
      startListener();
    });

    // ‚úÖ Listener Saldo
    function startListener() {
      db.ref("users/" + userId + "/saldo").on("value", snap => {
        const saldo = snap.val() || 0;
        document.getElementById("saldo").innerText = "Rp" + saldo.toLocaleString("id-ID");
      });
    }

    // ‚úÖ Claim Button
    const rewards = {
      task1: 200,
      task2: 300,
      bonus1: 500,
      bonus2: 700
    };

    async function claim(task) {
      const ref = db.ref("users/" + userId + "/tasks/" + task);
      const snap = await ref.get();
      const now = Date.now();

      let data = snap.val() || { count: 0, last: 0 };

      // cooldown 2 menit
      if (now - data.last < 120000) {
        showToast("‚è≥ Masih cooldown, tunggu 2 menit.");
        return;
      }

      // limit 20x
      if (data.count >= 20) {
        showToast("‚ùå Limit harian tercapai untuk tombol ini.");
        return;
      }

      // update saldo
      const saldoRef = db.ref("users/" + userId + "/saldo");
      const saldoSnap = await saldoRef.get();
      const saldo = saldoSnap.val() || 0;
      saldoRef.set(saldo + rewards[task]);

      // update progress task
      ref.set({ count: data.count + 1, last: now });

      showToast(`‚úÖ +Rp${rewards[task].toLocaleString("id-ID")} ditambahkan!`);
    }
  </script>
</body>
</html>
